(this.webpackJsonpsite=this.webpackJsonpsite||[]).push([[0],{37:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){},43:function(e,t,c){},45:function(e,t,c){},46:function(e,t,c){"use strict";c.r(t);var n=c(7),a=c(30),r=c.n(a),i=(c(37),c(11)),s=(c(38),c(39),c(25)),o=c(10),u=c(26),d=c(15),l=c(27),j=c(12),b=Object(d.e)({apiKey:"AIzaSyD4XxIuiekhE84uh7_IIVX8Fzf3wXYCcDA",authDomain:"price-tracker-1c428.firebaseapp.com",databaseURL:"https://price-tracker-1c428.firebaseio.com",projectId:"price-tracker-1c428",storageBucket:"price-tracker-1c428.appspot.com",messagingSenderId:"371469893400",appId:"1:371469893400:web:661c8956a419487ddc286d",measurementId:"G-GJBMLVW97M"}),O=Object(l.b)(b),p=Object(j.c)(b),f=c(0),h=c.n(f),m=c(3),v=c(14),x=c(21),k=(c(43),c(6));function g(e){var t=e.productData,c=e.createProduct,a=e.editProduct,r=e.deleteProduct,s=Object(n.useState)((null===t||void 0===t?void 0:t.name)||""),o=Object(i.a)(s,2),u=o[0],d=o[1],l=Object(n.useState)((null===t||void 0===t?void 0:t.url)||""),j=Object(i.a)(l,2),b=j[0],O=j[1],p=Object(n.useState)((null===t||void 0===t?void 0:t.site)||""),f=Object(i.a)(p,2),v=f[0],x=f[1],g=function(){var e=Object(m.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c({name:u,url:b,site:v});case 3:d(""),O(""),x(""),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert("No se ha podido crear el producto: \n"+e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)("article",{className:"productItem",children:[Object(k.jsxs)("div",{className:"fields",children:[Object(k.jsxs)("div",{className:"field",children:[Object(k.jsx)("label",{htmlFor:"".concat(null===t||void 0===t?void 0:t.id,"_name"),className:"fieldLabel",children:"Nombre"}),Object(k.jsx)("input",{placeholder:"Nombre del producto",id:"".concat(null===t||void 0===t?void 0:t.id,"_name"),type:"text",value:u,onChange:function(e){return d(e.target.value)}})]}),Object(k.jsxs)("div",{className:"field",children:[Object(k.jsx)("label",{htmlFor:"".concat(null===t||void 0===t?void 0:t.id,"_site"),className:"fieldLabel",children:"Site"}),Object(k.jsx)("input",{placeholder:"Web del producto",id:"".concat(null===t||void 0===t?void 0:t.id,"_site"),type:"text",value:v,onChange:function(e){return x(e.target.value)}})]}),Object(k.jsxs)("div",{className:"field",children:[Object(k.jsx)("label",{htmlFor:"".concat(null===t||void 0===t?void 0:t.id,"_url"),className:"fieldLabel",children:"URL"}),Object(k.jsx)("input",{placeholder:"URL del producto",id:"".concat(null===t||void 0===t?void 0:t.id,"_url"),type:"text",value:b,onChange:function(e){return O(e.target.value)}})]})]}),Object(k.jsx)("div",{className:"actions",children:c?Object(k.jsx)("button",{className:"blue",type:"button",onClick:function(){return g()},children:"Crear"}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("button",{className:"blue",type:"button",onClick:function(){return a({id:null===t||void 0===t?void 0:t.id,name:u,url:b,site:v})},children:"Guardar"}),Object(k.jsx)("button",{className:"red",type:"button",onClick:function(){return r(null===t||void 0===t?void 0:t.id)},children:"Eliminar"})]})})]})}var N=Object(j.k)(p,"/products");function S(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)([]),s=Object(i.a)(r,2),o=s[0],u=s[1];Object(n.useEffect)((function(){Object(j.e)(Object(j.j)(N),(function(e){var t=Object(x.a)({id:e.key},e.val());u((function(e){return[t].concat(Object(v.a)(e))}))})),Object(j.g)(Object(j.j)(N),(function(e){u((function(t){return Object(v.a)(t.filter((function(t){return t.id!==e.key})))}))}))}),[]);var d=function(){var e=Object(m.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.b)(Object(j.j)(N,Object(j.h)("url"),Object(j.a)(t.url)));case 2:if(!e.sent.exists()){e.next=5;break}throw new Error('Ya existe un producto con la URL "'.concat(t.url,'"'));case 5:Object(j.i)(N,{name:t.name,site:t.site,url:t.url});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(m.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(c),e.prev=1,e.next=4,Promise.all(t.map((function(e){return d(e)})));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log("this failed: ",e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),b=function(e){Object(j.m)(Object(j.k)(p,"/products/".concat(e.id)),{name:e.name,site:e.site,url:e.url})},O=function(e){Object(j.l)(Object(j.k)(p,"/products/".concat(e)))};return Object(k.jsxs)("div",{className:"productsPage",children:[Object(k.jsx)("h1",{className:"heading",children:"Productos"}),Object(k.jsx)("h2",{className:"subheading",children:"Crear productos en masa"}),Object(k.jsx)("code",{children:"JSON.stringify([...document.querySelectorAll('.product-card')].map(pc => ({name: pc.parentNode.dataset.name, url: pc.parentNode.getAttribute('href'), site: 'pccomponentes' })))"}),Object(k.jsx)("textarea",{onChange:function(e){return a(e.target.value)},value:c}),Object(k.jsx)("button",{className:"blue",type:"button",onClick:function(){return l()},children:"Crear todos"}),Object(k.jsx)("h2",{className:"subheading",children:"Crear producto"}),Object(k.jsx)(g,{createProduct:d}),Object(k.jsx)("h2",{className:"subheading",children:"Productos actuales"}),Object(k.jsx)("div",{className:"productList",children:o.map((function(e){return Object(k.jsx)(g,{productData:e,editProduct:b,deleteProduct:O},e.id)}))})]})}var y=c(31);c(45);function C(e){var t=e.dataItem;return Object(k.jsxs)("div",{className:"dataItem".concat(t.loading?" loading":t.isInStock?" inStock":" notInStock"),children:[Object(k.jsxs)("div",{className:"leftContent",children:[Object(k.jsxs)("header",{className:"headerContent",children:[Object(k.jsx)("span",{children:t.loading?Object(k.jsx)("img",{alt:"",className:"loadingSpinner",src:"stock-checker-site/loading.svg"}):t.productPrice?t.isInStock?"\u2714\ufe0f":"\u274c":"\u2754"}),Object(k.jsx)("span",{className:"name",children:t.productName})]}),Object(k.jsxs)("div",{className:"smallContent",children:[Object(k.jsx)("span",{className:"timestamp",children:Object(y.a)(new Date(t.date),"es_ES")}),Object(k.jsxs)("span",{className:"site",children:["- @",t.productSite]})]})]}),Object(k.jsxs)("div",{className:"rightContent",children:[Object(k.jsxs)("span",{className:"price",children:[t.productPrice?t.productPrice:t.loading?Object(k.jsx)("img",{alt:"",className:"loadingSpinner",src:"stock-checker-site/loading.svg"}):"\u2754"," EUR"]}),Object(k.jsx)("a",{rel:"noreferrer",target:"_blank",href:t.productUrl,className:"visitButton",children:"\ud83d\udd17 Visit"})]})]},t.key)}var I=Object(j.k)(p,"/data"),P=Object(j.k)(p,"/latestStock"),w=Object(j.j)(I,Object(j.d)(50)),F=Object(j.j)(P,Object(j.d)(50));function L(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)([]),s=Object(i.a)(r,2),o=s[0],u=s[1],d=Object(n.useState)(!1),l=Object(i.a)(d,2),b=l[0],O=l[1];Object(n.useEffect)((function(){Object(j.g)(Object(j.j)(Object(j.k)(p,"/latestStock")),(function(e){u((function(t){return Object(v.a)(t.filter((function(t){return t.id!==e.key})))}))})),O(!0),Object(j.e)(w,(function(e){var t=Object(x.a)({id:e.key},e.val());O(!1),f([t])})),Object(j.e)(F,(function(e){var t=Object(x.a)({id:e.key},e.val());h([t])})),Object(j.f)(F,(function(e){var t=Object(x.a)({id:e.key},e.val());g(t)})),Object(j.f)(w,(function(e){var t=Object(x.a)({id:e.key},e.val());m(t)}))}),[]);var f=function(e){a((function(t){return[].concat(Object(v.a)(t),Object(v.a)(e))}))},h=function(e){u((function(t){return[].concat(Object(v.a)(t),Object(v.a)(e))}))},m=function(e){a((function(t){var c=Object(v.a)(t);return c[c.findIndex((function(t){return t.id===e.id}))]=e,c}))},g=function(e){u((function(t){var c=Object(v.a)(t);return c[c.findIndex((function(t){return t.id===e.id}))]=e,c}))};return Object(k.jsxs)("div",{className:"homePage",children:[Object(k.jsx)("h1",{className:"heading",children:"En stock"}),Object(k.jsx)("div",{className:"data",children:o.sort((function(e,t){return parseFloat(e.productPrice)>parseFloat(t.productPrice)?1:-1})).map((function(e){return Object(x.a)(Object(x.a)({},e),{},{isInStock:!0})})).map((function(e){return Object(k.jsx)(C,{dataItem:e},e.id)}))}),Object(k.jsx)("h1",{className:"heading",children:"Informaci\xf3n en directo"}),Object(k.jsx)("div",{className:"data",children:b?"Recuperando datos...":c.sort((function(e,t){return e.date>t.date?-1:1})).map((function(e){return Object(k.jsx)(C,{dataItem:e},e.id)}))})]})}var E=function(){var e=Object(n.useState)(),t=Object(i.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!1),d=Object(i.a)(r,2),l=d[0],j=d[1];return Object(n.useEffect)((function(){Object(u.b)(O,(function(e){e?("7Xhp5BspVFNqxngdLYKk5C9Hzm62"===e.uid&&j(!0),a(!0)):(j(!1),a(!1))}))}),[]),Object(k.jsxs)("div",{className:"app",children:[!0===c?Object(k.jsx)("button",{className:"red",onClick:function(){return Object(u.d)(O)},type:"button",children:"logout"}):!1===c?Object(k.jsx)("button",{className:"blue",onClick:function(){return Object(u.c)(O,new u.a)},type:"button",children:"login"}):"Checking your session...",l&&Object(k.jsxs)("nav",{children:[Object(k.jsx)(s.b,{to:"/stock-checker-site",children:"Home"}),Object(k.jsx)(s.b,{to:"/stock-checker-site/products",children:"Products"})]}),Object(k.jsxs)(o.c,{children:[Object(k.jsx)(o.a,{path:"/stock-checker-site",element:Object(k.jsx)(L,{})}),l&&Object(k.jsx)(o.a,{path:"/stock-checker-site/products",element:Object(k.jsx)(S,{})})]})]})},_=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,47)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;c(e),n(e),a(e),r(e),i(e)}))};r.a.render(Object(k.jsx)(s.a,{children:Object(k.jsx)(E,{})}),document.getElementById("root")),_()}},[[46,1,2]]]);
//# sourceMappingURL=main.ea52ed2f.chunk.js.map