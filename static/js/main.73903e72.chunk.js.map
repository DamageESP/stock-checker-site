{"version":3,"sources":["components/data-item.js","App.js","reportWebVitals.js","index.js"],"names":["DataItem","dataItem","className","loading","isInStock","alt","src","productPrice","productName","format","Date","date","productSite","rel","target","href","productUrl","key","app","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","db","getDatabase","dataRef","ref","stockRef","last50DataRef","query","limitToLast","lastHourInStock","App","useState","data","setData","inStockItems","setInStockItems","setLoading","useEffect","onChildAdded","snapshot","newItems","val","curData","onChildChanged","copy","findIndex","cd","map","d","sort","a","b","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.73903e72.chunk.js","sourcesContent":["import { format } from \"timeago.js\";\nimport \"./data-item.scss\"\n\nexport function DataItem({ dataItem }) {\n  return (\n    <div className={`dataItem${dataItem.loading ? ' loading' : dataItem.isInStock ? ' inStock' : ' notInStock'}`} key={dataItem.key}>\n      <div className=\"leftContent\">\n        <header className=\"headerContent\">\n          <span>{dataItem.loading ? <img alt=\"\" className=\"loadingSpinner\" src=\"loading.svg\" /> : dataItem.productPrice ? dataItem.isInStock ? '‚úîÔ∏è' : '‚ùå' : '‚ùî'}</span>\n          <span className=\"name\">{dataItem.productName}</span>\n        </header>\n        <div className=\"smallContent\">\n          <span className=\"timestamp\">{format(new Date(dataItem.date), 'es_ES')}</span>\n          <span className=\"site\">- @{dataItem.productSite}</span>\n        </div>\n      </div>\n      <div className=\"rightContent\">\n        <span className=\"price\">{dataItem.productPrice ? dataItem.productPrice : dataItem.loading ? <img alt=\"\" className=\"loadingSpinner\" src=\"loading.svg\" /> : '‚ùî'} EUR</span>\n        <a rel=\"noreferrer\" target=\"_blank\" href={dataItem.productUrl} className=\"visitButton\">üîó Visit</a>\n      </div>\n    </div>\n  )\n}","import './reset.scss';\nimport './App.scss';\n\nimport { initializeApp } from \"firebase/app\";\nimport { getDatabase, ref, onChildAdded, onChildChanged, limitToLast, query, orderByChild, endBefore } from \"firebase/database\";\nimport { useEffect, useState } from 'react'\nimport { DataItem } from './components/data-item';\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyD4XxIuiekhE84uh7_IIVX8Fzf3wXYCcDA\",\n  authDomain: \"price-tracker-1c428.firebaseapp.com\",\n  databaseURL: \"https://price-tracker-1c428.firebaseio.com\",\n  projectId: \"price-tracker-1c428\",\n  storageBucket: \"price-tracker-1c428.appspot.com\",\n  messagingSenderId: \"371469893400\",\n  appId: \"1:371469893400:web:661c8956a419487ddc286d\",\n  measurementId: \"G-GJBMLVW97M\"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst db = getDatabase(app);\nconst dataRef = ref(db, '/data')\nconst stockRef = ref(db, '/latestStock')\nconst last50DataRef = query(dataRef, limitToLast(50))\nconst lastHourInStock = query(stockRef, limitToLast(50))\n\nfunction App() {\n  const [data, setData] = useState([])\n  const [inStockItems, setInStockItems] = useState([])\n  const [loading, setLoading] = useState(false)\n\n  const addData = newItems => {\n    setData(curData => [...curData, ...newItems])\n  }\n\n  const addInStock = newItems => {\n    setInStockItems(curData => [...curData, ...newItems])\n  }\n\n  const replaceData = dataItem => {\n    setData(curData => {\n      const copy = [...curData]\n      copy[copy.findIndex(cd => cd.key === dataItem.key)] = dataItem\n      return copy\n    })\n  }\n\n  const replaceInStock = dataItem => {\n    setInStockItems(curData => {\n      const copy = [...curData]\n      copy[copy.findIndex(cd => cd.key === dataItem.key)] = dataItem\n      return copy\n    })\n  }\n\n  useEffect(() => {\n    /* get(dataRef).then(snapshot => {\n      const data = Object.values(snapshot.val())\n      console.log('get', data);\n      setData(data)\n    }) */\n    setLoading(true)\n    onChildAdded(last50DataRef, (snapshot) => {\n      const data = {\n        key: snapshot.key,\n        ...snapshot.val(),\n      }\n      setLoading(false)\n      addData([data])\n    })\n    onChildAdded(lastHourInStock, (snapshot) => {\n      const data = {\n        key: snapshot.key,\n        ...snapshot.val(),\n      }\n      addInStock([data])\n    })\n    onChildChanged(lastHourInStock, (snapshot) => {\n      const data = {\n        key: snapshot.key,\n        ...snapshot.val(),\n      }\n      replaceInStock(data)\n    })\n    onChildChanged(last50DataRef, (snapshot) => {\n      const data = {\n        key: snapshot.key,\n        ...snapshot.val(),\n      }\n      replaceData(data)\n    })\n  }, [])\n\n  return (\n    <div className=\"app\">\n      <h1 className=\"heading\">En stock</h1>\n      <div className=\"data\">\n        {inStockItems.map(d => ({ ...d, isInStock: true })).map(d => (\n          <DataItem dataItem={d} key={d.key} />\n        ))}\n      </div>\n      <h1 className=\"heading\">Latest data</h1>\n      <div className=\"filters\">\n\n      </div>\n      <div className=\"data\">\n        {loading ? 'Recuperando datos...' : data.sort((a, b) => a.date > b.date ? -1 : 1).map(d => (\n          <DataItem dataItem={d} key={d.key} />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}